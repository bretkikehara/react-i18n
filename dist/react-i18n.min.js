!function(n,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e(require("react"),require("node-fetch")):"function"==typeof define&&define.amd?define(["react","node-fetch"],e):n.i18n=e(n.React,n.fetch)}(this,function(n,e){"use strict";function t(n){return n}function r(n){var e="!1@2#3";return new RegExp(e).test(n)?e+e:e}function o(n){Object.keys(n||{}).forEach(function(e){E[e]=n[e]})}function i(n){var e={};return Object.keys(n).forEach(function(t){var o=n[t];"string"==typeof o&&!function(){var n=r(o);e[t]=o.replace(x,function(e){return""+n+e+n}).split(n)}()}),e}function u(n){return(n||"").split(".").splice(0,2)}function a(n){var e=window[E.global];return(e||{})[n]}function s(n,e){var t=u(n),r=S(t,2),o=r[0],i=r[1];return(a(o)||{})[i||e]}function c(n){var e={};return Object.keys(n).forEach(function(t){var r=n[t];"string"==typeof r?e[t]=s(r):e[t]=c(r)}),e}function f(n,e,t){window[E.global]&&E.lang===n||(window[E.global]={}),window[E.global][e]=i(t)}function l(n,e){Object.keys(e).forEach(function(t){f(n,t,e[t])})}function p(n){var e={};return"string"==typeof n?[n]:((n||[]).forEach(function(n){e[n]=!0}),Object.keys(e))}function y(n){var r=u(n),o=S(r,1),i=o[0],s=a(i);if(s)return Promise.resolve(s);if(!E.url)return Promise.reject(new Error("Set the i18n URL path to asynchronously load "+i+" bundle."));if(P[i])return Promise.resolve(P[i]);var c=E.url+"/"+i+"."+E.ext;return P[i]=e(c).then(function(n){return delete P[i],n.ok?n.json():void 0}).then(function(n){return n?void f(E.lang,i,n):(E.asyncLoadError||t)(new Error(""),{bundle:i,url:c})},function(){}),P[i]}function d(n){var e=n.map(function(n){var e=u(n),t=S(e,1),r=t[0];return r});return Promise.all(p(e).map(function(n){return y(n)}))}function v(n,e){var t=e||{};return(Array.isArray(n)?n:[]).map(function(n,e){if(n){var r=x.exec(n);return React.createElement("span",{key:e},r?t[r[1]]:n)}})}function g(n,e){var t=s(n);return renderMessage(t,e)}function h(n){return T[n]||_}function b(n){return function(){return{tagName:n,message:[this.props.fallback]}}}function m(n){return"object"===("undefined"==typeof n?"undefined":j(n))?JSON.stringify(n):n}function w(n){var e=M[n]||A;return function(){var n=this,t={};return Object.keys(this.props).forEach(function(r){var o=e[r],i=o?r:"data-"+r,u=n.props[r];t[i]=o?u:m(u)}),t}}var k="default"in n?n.default:n;e="default"in e?e.default:e;var j="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},S=(function(){function n(n){this.value=n}function e(e){function t(n,e){return new Promise(function(t,o){var a={key:n,arg:e,resolve:t,reject:o,next:null};u?u=u.next=a:(i=u=a,r(n,e))})}function r(t,i){try{var u=e[t](i),a=u.value;a instanceof n?Promise.resolve(a.value).then(function(n){r("next",n)},function(n){r("throw",n)}):o(u.done?"return":"normal",u.value)}catch(n){o("throw",n)}}function o(n,e){switch(n){case"return":i.resolve({value:e,done:!0});break;case"throw":i.reject(e);break;default:i.resolve({value:e,done:!1})}i=i.next,i?r(i.key,i.arg):u=null}var i,u;this._invoke=t,"function"!=typeof e.return&&(this.return=void 0)}return"function"==typeof Symbol&&Symbol.asyncIterator&&(e.prototype[Symbol.asyncIterator]=function(){return this}),e.prototype.next=function(n){return this._invoke("next",n)},e.prototype.throw=function(n){return this._invoke("throw",n)},e.prototype.return=function(n){return this._invoke("return",n)},{wrap:function(n){return function(){return new e(n.apply(this,arguments))}},await:function(e){return new n(e)}}}(),function(){function n(n,e){var t=[],r=!0,o=!1,i=void 0;try{for(var u,a=n[Symbol.iterator]();!(r=(u=a.next()).done)&&(t.push(u.value),!e||t.length!==e);r=!0);}catch(n){o=!0,i=n}finally{try{!r&&a.return&&a.return()}finally{if(o)throw i}}return t}return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return n(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}()),E={global:"_i18n",lang:"en-US",url:"",ext:"lang.json",asyncLoadError:t},P={},x=/{\s*?(\w+?)\s*?}/g,O={setConfig:o,getMessage:s,getMessages:c,_renderMessage:v,_loadBundleSync:f,loadBundlesSync:l,_loadBundleAsync:y,loadBundlesAsync:d,_parseLocaleKey:u,renderI18n:g},_={tag:n.PropTypes.string.isRequired,options:n.PropTypes.object,fallback:n.PropTypes.string,className:n.PropTypes.string,onClick:n.PropTypes.func},T={a:Object.assign({href:n.PropTypes.string,target:n.PropTypes.string},_)},A={className:!0},M={a:Object.assign({href:!0,target:!0,onClick:!0,className:!0},A)},N={componentWillMount:function(){var n=this,e=this.props.tag;O._loadBundleAsync(e).then(function(){var t=O.getMessage(e);t&&n.setState({message:t})})},render:function(){var n=this.state,e=this.filterProps();return k.createElement(n.tagName,e,O._renderMessage(n.message,this.props.options))}},B={};["p","span","a","strong"].forEach(function(n){B[n]=k.createClass(Object.assign({getInitialState:b(n),propTypes:h(n),filterProps:w(n)},N))});var I=Object.assign({},B,O);return I});